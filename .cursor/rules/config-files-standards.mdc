# é…ç½®æ–‡ä»¶ç¼–å†™è§„èŒƒ

## æ¨¡å—è¯­æ³•è§„èŒƒ

### é‡è¦æé†’ âš ï¸
**ä¸åŒé…ç½®æ–‡ä»¶ä½¿ç”¨ä¸åŒçš„æ¨¡å—è¯­æ³•ï¼Œæ··ç”¨ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼**

### 1. ES æ¨¡å—è¯­æ³• (ESM)
ä½¿ç”¨ `export default` æˆ– `export` çš„æ–‡ä»¶ï¼š

#### é€‚ç”¨æ–‡ä»¶ç±»å‹
```
âœ… TypeScript é…ç½®æ–‡ä»¶
- electron.vite.config.ts
- vite.config.ts  
- vitest.config.ts

âœ… ç°ä»£ JavaScript æ¨¡å—
- ç»„ä»¶æ–‡ä»¶ (.tsx, .jsx)
- å·¥å…·å‡½æ•° (.ts, .js with type: module)
```

#### è¯­æ³•ç¤ºä¾‹
```typescript
// electron.vite.config.ts âœ…
import { defineConfig } from 'electron-vite'
export default defineConfig({
  // é…ç½®å†…å®¹
})

// utils/helpers.ts âœ…  
export function helper() { }
export default class MyClass { }
```

### 2. CommonJS è¯­æ³• (CJS)
ä½¿ç”¨ `module.exports` æˆ– `require()` çš„æ–‡ä»¶ï¼š

#### é€‚ç”¨æ–‡ä»¶ç±»å‹
```
âœ… Node.js é…ç½®æ–‡ä»¶
- tailwind.config.js
- postcss.config.js
- eslint.config.mjs (å¯é€‰)
- jest.config.js

âœ… ä¼ ç»Ÿ Node.js æ¨¡å—
- æ„å»ºè„šæœ¬
- æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆä¸»è¿›ç¨‹ï¼‰
```

#### è¯­æ³•ç¤ºä¾‹
```javascript
// tailwind.config.js âœ…
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ['./src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {}
  },
  plugins: [
    require('@tailwindcss/forms')
  ]
}

// postcss.config.js âœ…
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
```

## å¸¸è§é”™è¯¯åŠä¿®å¤

### âŒ é”™è¯¯ç¤ºä¾‹ 1ï¼šé…ç½®æ–‡ä»¶ä½¿ç”¨é”™è¯¯è¯­æ³•
```javascript
// postcss.config.js - é”™è¯¯ âŒ
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
// é”™è¯¯åŸå› ï¼šPostCSS é…ç½®æ–‡ä»¶éœ€è¦ CommonJS è¯­æ³•
```

```javascript
// postcss.config.js - æ­£ç¡® âœ…
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
```

### âŒ é”™è¯¯ç¤ºä¾‹ 2ï¼šrequire åœ¨ ES æ¨¡å—ä¸­
```typescript
// electron.vite.config.ts - é”™è¯¯ âŒ
import { defineConfig } from 'electron-vite'
const tailwindcss = require('tailwindcss')

export default defineConfig({
  // ...
})
// é”™è¯¯åŸå› ï¼šES æ¨¡å—ä¸­ä¸èƒ½ä½¿ç”¨ require
```

```typescript
// electron.vite.config.ts - æ­£ç¡® âœ…
import { defineConfig } from 'electron-vite'
import tailwindcss from 'tailwindcss'

export default defineConfig({
  // ...
})
```

## é¡¹ç›®é…ç½®æ–‡ä»¶æ¸…å•

### ES æ¨¡å—è¯­æ³•æ–‡ä»¶
| æ–‡ä»¶ | è¯­æ³• | åŸå›  |
|------|------|------|
| `electron.vite.config.ts` | `export default` | TypeScript é…ç½®ï¼ŒVite è¦æ±‚ ESM |
| `tsconfig.json` | JSON | é…ç½®æ–‡ä»¶æ ¼å¼ |
| `src/**/*.{ts,tsx}` | `export/import` | TypeScript æºç  |

### CommonJS è¯­æ³•æ–‡ä»¶  
| æ–‡ä»¶ | è¯­æ³• | åŸå›  |
|------|------|------|
| `tailwind.config.js` | `module.exports` | PostCSS ç”Ÿæ€ç³»ç»Ÿè¦æ±‚ CJS |
| `postcss.config.js` | `module.exports` | PostCSS é…ç½®æ–‡ä»¶æ ‡å‡† |
| `eslint.config.mjs` | `module.exports` | ESLint é…ç½®ï¼ˆå¯é€‰ ESMï¼‰|

## è¯†åˆ«æ–¹æ³•

### 1. æŸ¥çœ‹æ–‡ä»¶æ‰©å±•å
```
.ts / .tsx / .mts  â†’ é€šå¸¸æ˜¯ ESM
.js / .cjs        â†’ é€šå¸¸æ˜¯ CJS  
.mjs             â†’ å¼ºåˆ¶ ESM
```

### 2. æŸ¥çœ‹ package.json
```json
{
  "type": "module"  // æ•´ä¸ªé¡¹ç›®é»˜è®¤ ESM
}
```

### 3. æŸ¥çœ‹å·¥å…·æ–‡æ¡£
- **Vite é…ç½®**: ESM è¯­æ³•
- **PostCSS é…ç½®**: CJS è¯­æ³•  
- **Tailwind é…ç½®**: CJS è¯­æ³•
- **ESLint é…ç½®**: ä¸¤è€…çš†å¯

## é”™è¯¯æ’æŸ¥æŒ‡å—

### å¸¸è§é”™è¯¯ä¿¡æ¯
```bash
# ES æ¨¡å—é”™è¯¯
SyntaxError: Unexpected token 'export'
â†’ æ–‡ä»¶éœ€è¦ä½¿ç”¨ CommonJS è¯­æ³•

# CommonJS é”™è¯¯  
SyntaxError: Cannot use import statement outside a module
â†’ æ–‡ä»¶éœ€è¦ä½¿ç”¨ ES æ¨¡å—è¯­æ³•

# require é”™è¯¯
Error: require() is not defined in ES module scope
â†’ åœ¨ ES æ¨¡å—ä¸­ä½¿ç”¨äº† require()
```

### å¿«é€Ÿä¿®å¤æ­¥éª¤
1. **ç¡®è®¤æ–‡ä»¶ç±»å‹**ï¼šé…ç½®æ–‡ä»¶è¿˜æ˜¯æºç æ–‡ä»¶ï¼Ÿ
2. **æŸ¥çœ‹é”™è¯¯ä¿¡æ¯**ï¼šæ˜¯ export é”™è¯¯è¿˜æ˜¯ import é”™è¯¯ï¼Ÿ
3. **é€‰æ‹©æ­£ç¡®è¯­æ³•**ï¼š
   - é…ç½®æ–‡ä»¶ â†’ é€šå¸¸ç”¨ `module.exports`
   - æºç æ–‡ä»¶ â†’ é€šå¸¸ç”¨ `export default`
4. **æ›´æ–°å¯¼å…¥è¯­æ³•**ï¼š
   - CJS: `const x = require('x')`
   - ESM: `import x from 'x'`

## æœ€ä½³å®è·µ

### 1. åˆ›å»ºæ–°é…ç½®æ–‡ä»¶æ—¶
- ğŸ“– **å…ˆæŸ¥æ–‡æ¡£**ï¼šç¡®è®¤å·¥å…·è¦æ±‚çš„æ¨¡å—è¯­æ³•
- ğŸ” **å‚è€ƒç°æœ‰**ï¼šæŸ¥çœ‹é¡¹ç›®ä¸­ç±»ä¼¼æ–‡ä»¶çš„å†™æ³•
- âš¡ **æµ‹è¯•è¿è¡Œ**ï¼šåˆ›å»ºåç«‹å³æµ‹è¯•æ˜¯å¦æ­£å¸¸å·¥ä½œ

### 2. ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹
- âœ… é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®
- âœ… import/require æ˜¯å¦åŒ¹é…æ–‡ä»¶ç±»å‹  
- âœ… æ˜¯å¦æœ‰æ··ç”¨è¯­æ³•çš„æƒ…å†µ

### 3. å¼€å‘ç¯å¢ƒè®¾ç½®
```json
// package.json scripts
{
  "scripts": {
    "lint:config": "node -c tailwind.config.js && node -c postcss.config.js",
    "test:config": "npm run lint:config && npm run typecheck"
  }
}
```

## å·¥å…·é…ç½®æ¨¡æ¿

### Tailwind é…ç½®æ¨¡æ¿
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ['./src/renderer/index.html', './src/renderer/src/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {
      // è‡ªå®šä¹‰ä¸»é¢˜
    }
  },
  plugins: [
    // eslint-disable-next-line @typescript-eslint/no-require-imports
    require('@tailwindcss/forms')
  ],
  darkMode: 'class'
}
```

### PostCSS é…ç½®æ¨¡æ¿
```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {}
  }
}
```

è®°ä½ï¼š**é…ç½®æ–‡ä»¶é”™è¯¯ä¼šå¯¼è‡´æ•´ä¸ªæ„å»ºè¿‡ç¨‹å¤±è´¥ï¼ŒåŠ¡å¿…ä»”ç»†æ£€æŸ¥æ¨¡å—è¯­æ³•ï¼**