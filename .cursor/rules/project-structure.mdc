# ä¸‡å¹´å†åº”ç”¨é¡¹ç›®ç»“æ„è§„èŒƒ

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäº Electron + React + TypeScript çš„ä¸‡å¹´å†æ¡Œé¢åº”ç”¨ï¼Œæ”¯æŒå†œå†ã€èŠ‚æ—¥ã€ä¸ªäººäº‹ä»¶ç­‰åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ
- **ä¸»æ¡†æ¶**: Electron
- **å‰ç«¯**: React 19 + TypeScript
- **æ„å»ºå·¥å…·**: electron-vite
- **UIæ ·å¼**: Tailwind CSS
- **æ—¥æœŸå¤„ç†**: dayjs + lunar-javascript
- **æ•°æ®å­˜å‚¨**: electron-store
- **ç½‘ç»œè¯·æ±‚**: axios

## é¡¹ç›®ç»“æ„è§„èŒƒ

### è¿›ç¨‹åˆ†å±‚
- [src/main](mdc:src/main): Electronä¸»è¿›ç¨‹ï¼Œè´Ÿè´£ç³»ç»Ÿçº§åŠŸèƒ½
- [src/preload](mdc:src/preload): é¢„åŠ è½½è„šæœ¬ï¼Œå®‰å…¨åœ°æš´éœ²API
- [src/renderer](mdc:src/renderer): æ¸²æŸ“è¿›ç¨‹ï¼Œå®ç°ç”¨æˆ·ç•Œé¢

### ä¸»è¿›ç¨‹ç»“æ„ (src/main/)
```
src/main/
â”œâ”€â”€ index.ts                 # ä¸»è¿›ç¨‹å…¥å£
â”œâ”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ window.ts           # çª—å£ç®¡ç†
â”‚   â”œâ”€â”€ tray.ts             # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â””â”€â”€ ipc/                # IPCé€šä¿¡å¤„ç†
â”œâ”€â”€ features/                # ä¸šåŠ¡åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ storage/            # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ events/             # äº‹ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ holidays/           # å‡æœŸæ•°æ®
â”‚   â””â”€â”€ updates/            # è‡ªåŠ¨æ›´æ–°
â”œâ”€â”€ services/                # åå°æœåŠ¡
â”‚   â”œâ”€â”€ lunar-service.ts    # å†œå†è®¡ç®—æœåŠ¡
â”‚   â””â”€â”€ notification.ts     # é€šçŸ¥æœåŠ¡
â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
    â”œâ”€â”€ date-utils.ts       # æ—¥æœŸå·¥å…·
    â””â”€â”€ validation.ts       # éªŒè¯å·¥å…·
```

### é¢„åŠ è½½è„šæœ¬ç»“æ„ (src/preload/)
```
src/preload/
â”œâ”€â”€ index.ts                # é¢„åŠ è½½è„šæœ¬å…¥å£
â”œâ”€â”€ api/                    # æŒ‰æ¨¡å—ç»„ç»‡çš„APIæ¥å£
â”‚   â”œâ”€â”€ events.ts          # äº‹ä»¶ç›¸å…³API
â”‚   â”œâ”€â”€ settings.ts        # è®¾ç½®ç›¸å…³API
â”‚   â”œâ”€â”€ lunar.ts           # å†œå†ç›¸å…³API
â”‚   â””â”€â”€ holidays.ts        # å‡æœŸç›¸å…³API
â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
    â”œâ”€â”€ ipc-utils.ts       # IPCå·¥å…·
    â””â”€â”€ validation.ts      # éªŒè¯å·¥å…·
```

### æ¸²æŸ“è¿›ç¨‹ç»“æ„ (src/renderer/)
```
src/renderer/
â”œâ”€â”€ index.html              # ä¸»HTMLæ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx           # åº”ç”¨å…¥å£
    â”œâ”€â”€ App.tsx            # ä¸»åº”ç”¨ç»„ä»¶
    â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ Calendar/      # æ—¥å†ç»„ä»¶
    â”‚   â”œâ”€â”€ EventForm/     # äº‹ä»¶è¡¨å•
    â”‚   â””â”€â”€ common/        # é€šç”¨ç»„ä»¶
    â”œâ”€â”€ features/           # åŠŸèƒ½æ¨¡å—
    â”‚   â”œâ”€â”€ calendar/      # æ—¥å†åŠŸèƒ½
    â”‚   â”œâ”€â”€ events/        # äº‹ä»¶ç®¡ç†
    â”‚   â”œâ”€â”€ settings/      # è®¾ç½®åŠŸèƒ½
    â”‚   â””â”€â”€ holidays/      # å‡æœŸåŠŸèƒ½
    â”œâ”€â”€ layouts/            # å¸ƒå±€ç»„ä»¶
    â”‚   â”œâ”€â”€ MainLayout.tsx
    â”‚   â””â”€â”€ PopupLayout.tsx
    â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ CalendarPage.tsx
    â”‚   â”œâ”€â”€ SettingsPage.tsx
    â”‚   â””â”€â”€ EventPage.tsx
    â”œâ”€â”€ stores/             # çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ calendar-store.ts
    â”‚   â”œâ”€â”€ events-store.ts
    â”‚   â””â”€â”€ settings-store.ts
    â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hooks
    â”‚   â”œâ”€â”€ useLunarDate.ts
    â”‚   â”œâ”€â”€ useEvents.ts
    â”‚   â””â”€â”€ useSettings.ts
    â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
    â”‚   â”œâ”€â”€ date-utils.ts
    â”‚   â”œâ”€â”€ lunar-utils.ts
    â”‚   â””â”€â”€ validation.ts
    â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
    â”‚   â”œâ”€â”€ calendar.ts
    â”‚   â”œâ”€â”€ events.ts
    â”‚   â””â”€â”€ settings.ts
    â””â”€â”€ assets/             # é™æ€èµ„æº
        â”œâ”€â”€ icons/
        â””â”€â”€ styles/
```

### åŠŸèƒ½æ¨¡å—ç»„ç»‡è§„èŒƒ

æ¯ä¸ªåŠŸèƒ½æ¨¡å—åº”åŒ…å«ï¼š
```
features/calendar/
â”œâ”€â”€ components/             # æ¨¡å—ä¸“ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ CalendarGrid.tsx
â”‚   â”œâ”€â”€ CalendarHeader.tsx
â”‚   â””â”€â”€ CalendarDay.tsx
â”œâ”€â”€ hooks/                  # æ¨¡å—ä¸“ç”¨é’©å­
â”‚   â”œâ”€â”€ useCalendar.ts
â”‚   â””â”€â”€ useCalendarNavigation.ts
â”œâ”€â”€ stores/                 # æ¨¡å—çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ calendar-store.ts
â”œâ”€â”€ utils/                  # æ¨¡å—å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ calendar-utils.ts
â”‚   â””â”€â”€ navigation-utils.ts
â””â”€â”€ types.ts               # æ¨¡å—ç±»å‹å®šä¹‰
```

### é…ç½®æ–‡ä»¶
- [package.json](mdc:package.json) - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
- [electron.vite.config.ts](mdc:electron.vite.config.ts) - æ„å»ºé…ç½®
- [tsconfig.json](mdc:tsconfig.json) - TypeScripté…ç½®
- [eslint.config.mjs](mdc:eslint.config.mjs) - ESLinté…ç½®
- [electron-builder.yml](mdc:electron-builder.yml) - æ‰“åŒ…é…ç½®
- [tailwind.config.js](mdc:tailwind.config.js) - Tailwind CSSé…ç½®
- [postcss.config.js](mdc:postcss.config.js) - PostCSSé…ç½®

âš ï¸ **é‡è¦**: é…ç½®æ–‡ä»¶å¿…é¡»ä½¿ç”¨æ­£ç¡®çš„æ¨¡å—è¯­æ³•ï¼Œè¯¦è§ [é…ç½®æ–‡ä»¶ç¼–å†™è§„èŒƒ](mdc:.cursor/rules/config-files-standards.mdc)

## å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½åè§„èŒƒ
- **ç»„ä»¶æ–‡ä»¶/ç›®å½•**: ä½¿ç”¨ PascalCaseï¼Œå¦‚ `Calendar.tsx`, `EventForm/`
- **å·¥å…·/é…ç½®æ–‡ä»¶**: ä½¿ç”¨ camelCaseï¼Œå¦‚ `dateUtils.ts`, `lunarUtils.ts`
- **æ ·å¼æ–‡ä»¶**: ä½¿ç”¨ camelCaseï¼Œå¦‚ `calendarStyles.css`
- **ç±»å‹æ–‡ä»¶**: ä½¿ç”¨ camelCase + .tsï¼Œå¦‚ `calendarTypes.ts`
- **å¸¸é‡æ–‡ä»¶**: ä½¿ç”¨ UPPER_SNAKE_CASEï¼Œå¦‚ `CONSTANTS.ts`

### ç›®å½•å‘½åè§„èŒƒ
- **åŠŸèƒ½æ¨¡å—**: ä½¿ç”¨ camelCaseï¼Œå¦‚ `calendar/`, `eventManagement/`
- **ç»„ä»¶ç›®å½•**: ä½¿ç”¨ PascalCaseï¼Œå¦‚ `Calendar/`, `EventForm/`
- **å·¥å…·ç›®å½•**: ä½¿ç”¨ camelCaseï¼Œå¦‚ `utils/`, `hooks/`

## å¼€å‘æŒ‡å¯¼

### å¼€å‘ä¼˜å…ˆçº§
1. ç³»ç»Ÿæ‰˜ç›˜å’Œçª—å£ç®¡ç†
2. æ—¥å†æ ¸å¿ƒåŠŸèƒ½ï¼ˆå†œå†ã€èŠ‚æ—¥ï¼‰
3. äº‹ä»¶ç®¡ç†åŠŸèƒ½
4. æ•°æ®å­˜å‚¨å’ŒåŒæ­¥
5. UI/UX ä¼˜åŒ–
6. ç³»ç»Ÿé›†æˆï¼ˆè‡ªå¯åŠ¨ã€æ›´æ–°ï¼‰

### å…³é”®è§„èŒƒæ–‡æ¡£
- [Tailwind CSS v4 è¿ç§»æŒ‡å—](mdc:.cursor/rules/tailwind-v4-migration.mdc) - v4å®Œæ•´è¿ç§»æ–¹æ¡ˆ ğŸš€
- [å›¾æ ‡ä½¿ç”¨è§„èŒƒ](mdc:.cursor/rules/icon-usage-guide.mdc) - Lucide Reactå›¾æ ‡æ–¹æ¡ˆ ğŸ¨
- [macOS èœå•æ åº”ç”¨è§„èŒƒ](mdc:.cursor/rules/macos-menubar-app.mdc) - èœå•æ åº”ç”¨å¼€å‘æŒ‡å— ğŸ
- [åŠ¨æ€æ—¥æœŸå›¾æ ‡è§„èŒƒ](mdc:.cursor/rules/dynamic-date-icon.mdc) - æ™ºèƒ½æ—¥æœŸå›¾æ ‡å®ç° ğŸ“…
- [é…ç½®æ–‡ä»¶ç¼–å†™è§„èŒƒ](mdc:.cursor/rules/config-files-standards.mdc) - é¿å…æ¨¡å—è¯­æ³•é”™è¯¯ âš ï¸
- [TypeScript ä»£ç æ ¼å¼è§„èŒƒ](mdc:.cursor/rules/typescript-code-style.mdc) - ç»Ÿä¸€ä»£ç é£æ ¼ ğŸ¨
- [å¼€å‘å·¥ä½œæµç¨‹è§„èŒƒ](mdc:.cursor/rules/development-workflow.mdc) - ä»£ç æäº¤æµç¨‹ ğŸ”„
- [TypeScript ä»£ç è§„èŒƒ](mdc:.cursor/rules/typescript-standards.mdc) - ä»£ç è´¨é‡æ ‡å‡†
- [Tailwind CSS æ ·å¼è§„èŒƒ](mdc:.cursor/rules/tailwind-styling.mdc) - UIæ ·å¼å¼€å‘æŒ‡å¯¼
- [æ¨¡å—ç»„ç»‡è§„èŒƒ](mdc:.cursor/rules/module-organization.mdc) - ä»£ç æ¶æ„æŒ‡å¯¼
- [æ•°æ®å­˜å‚¨æ–¹æ¡ˆå¯¹æ¯”](mdc:.cursor/rules/data-storage-comparison.mdc) - æŠ€æœ¯é€‰å‹åˆ†æ ğŸ“Š
- [å¸¸è§é—®é¢˜æ’æŸ¥æŒ‡å—](mdc:.cursor/rules/troubleshooting-guide.mdc) - é—®é¢˜å¿«é€Ÿè§£å†³ ğŸ”§
